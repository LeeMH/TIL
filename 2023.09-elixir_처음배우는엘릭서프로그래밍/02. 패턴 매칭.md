# 2. 패턴 매칭

## 1. 할당문

* 엘릭서에서는 = 이 할당문(assign)이 아니다. 매치 연산자(match operator) 이다.

* 아래 코드에서 에러 내용이 매칭에 실패했다는 내용이다.

```elixir
iex(1)> a = 1
1
iex(2)> 1 = a
1
iex(3)> 2 = a
** (MatchError) no match of right hand side value: 1
```


## 2. 패턴 매칭

* 엘릭서는 좌변과 우변을 같게 만드는 방법을 찾는다.

* 양변을 같게 만드는 과정을 `패턴매칭` 이라고 한다. (iex(4) 예제 코드)

```elixir
iex(3)> list = [1, 2, 3]
[1, 2, 3]
iex(4)> [a, b, c] = list
[1, 2, 3]
iex(5)> a
1
iex(6)> b
2
iex(7)> c
3
```

* 아래의 예제는 a, b, c에 하나씩 매칭하는 과정이고 결과적으로 c에는 list의 3번째 항목이 매칭된다.

```elixir
iex(8)> list = [1, 2, [3, 4, 5]]
[1, 2, [3, 4, 5]]
iex(9)> [a, b, c] = list
[1, 2, [3, 4, 5]]
iex(10)> c
[3, 4, 5]
```

* 항목의 갯수뿐만 아니라 값도 같아야 패턴 매칭이 성공한다.

* 아래는 양변의 세번째 항목이 같지 않기 때문에 실패이다.

```elixir
iex(11)> list = [1, 2, 3]
[1, 2, 3]
iex(12)> [a, b, 4] = list
** (MatchError) no match of right hand side value: [1, 2, 3]
```

## 3. 언더스코어로 값 무시하기

* `언더스코어`는 와일드카드처럼 모든 경우에 매칭되며, 변수처럼 동작하지만 즉시 값이 버려진다.

```elixir
iex(14)> [_, _, c] = [1, 2, "cat"]
[1, 2, "cat"]
iex(15)> c
"cat"
```

## 4. 변수는 한번씩만 바인딩 된다

* 변수는 한번만 할당 된다.

* 두번째 예시에서는 b에 1이 할당된 상태에서, 다시 2를 매칭할 방법이 없다. 실패

```elixir
iex(16)> [a, a] = [1, 1]
[1, 1]
iex(17)> [b, b] = [1, 2]
** (MatchError) no match of right hand side value: [1, 2]
```

## 5. 이미 할당된값과 매칭하려면 ^을 사용한다

* `캐럿(^)`을 사용해 이미 할당된 값과 매칭을 할수 있다.

* iex(21) 부분에서 a에 새로 값을 할당하는것을 막도록 캐럿(^)을 사용했다. 

* 이미 할당된 2의 값과 우측변의 9를 매칭할 방법이 없기때문에 실패.

```elixir
iex(18)> a = 1
1
iex(19)> [1, a, 3] = [1, 2, 3]
[1, 2, 3]
iex(20)> a
2
iex(21)> [1, ^a, 3] = [1, 9, 3]
** (MatchError) no match of right hand side value: [1, 9, 3]
```