# [4. 게임서버와 클라이언트](https://thebook.io/006884/0228/)

## [4.1.패키지 게임에서 게임서버](https://thebook.io/006884/0229/)

* 인터넷이 등장하면서 3명이상 플레이하는 방식의 패키지 게임등장

* 플레이어중 한대가 서버의 역할을 수행하는 방식

* 일부 패키지 게임에서는 렌더링과 사용자 입력을 받지 않고 서버역할만 하는 프로그램이 존재. 이를 데이케이티드 서버(dedicated server)하고 칭함.

## [4.2.온라인 게임에서 게임서버](https://thebook.io/006884/0232/)

* MUD(Multi User Dungeon)이 가장 오래된 온라인 게임일듯.

* 패키지 게임에서 서버가 특정 유저가 된다면, 온라인 게임에서 서버는 게임사업자가 독점적으로 제공하는 서버의 형태

## [4.3.서버의 역할](https://thebook.io/006884/0234/)

* 게임루프

    1) 입력 받기

    2) 게임 로직 처리

    3) 렌더링

* 온라인 게임에서는 위 2번의 게임 로직을 `서버`단으로 이동

## [4.4.게임 클라이언트와 서버의 상호 작용](https://thebook.io/006884/0236/)

* 클라이언트/서버 상호작용(interaction)

    1) 연결

    2) 요청-응답

    3) 능동적 통보

    4) 연결해제


## [4.5.게임 서버가 하는 일](https://thebook.io/006884/0238/)

* 서버의 주된 일

    1) 여러 사용자와 상호작용

    2) 클라이언트에서 해킹 당하면 안되는 처리

    3) 플레이어의 상태 보관

* 로직처리 서버에서

    * 상대적으로 클라이언트보다 해킹등 위협에 강함

    * 하지만, 모든 로직을 서버에서 처리하면 레이턴시로 인해 랙이 발생

    * 따라서, 적절하게 로직을 클라이언트와 서버에서 분산해서 처리

        1) 이동 -> 클라이언트에서 처리

        2) 공격 -> 서버에서 처리


## [4.6.게임 서버의 품질](https://thebook.io/006884/0242/)

* 게임서버 품질의 목표

    1) 안정성(stability)

    2) 확장성(scailability)

    3) 성능(performance)

    4) 관리 편의성

### 4.6.1. 안정성

* 안정성이란 `게임 서버가 얼마나 죽지 않는가`를 의미

* 위협 = 물리적 위협 + 논리적 위협

* 안정성에는 `게임 서버가 얼마나 오작동을 하지 않는가`도 포함됨

* 게임 개발중 노력해야할 사항

    1) 치밀한 개발과 유닛 테스트

    2) 80:20 법칙

        * 성능의 80%는 20%의 소소코드에 의해 결정됨. `파레토 법칙`

        * 성능에 중요한 코드는 복잡해지더라도 최적화 코드를 구현하고, 나머지는 최대한 유지보수가 좋은 단순한 구조로 개발

    3) 1인 이상의 코드 리뷰

    4) 가정하지말고 검증

* 출시까지의 과정

    1) 치밀한개발 + 유닛 테스트

    2) 스트레스 테스트

    3) 클로즈 베타 테스트

    4) 프리 오픈

    5) 출시

* 서버가 100% 안정성을 가지기는 어렵다

    1) 죽더라도 최대한 빨리 다시 살아나게 해야 한다.

        * 모니터링 + 재기동 절차

    2) 죽더라도 최대한 적은 서비스만 죽게 한다.

    3) 오작동에 대해서 기록(로그)를 남길수 있게 한다.


### 4.6.2. 확장성

* 서버를 얼마나 많이 설치할수 있는가를 확정성이라고 한다.

* 유저 입장에서는 사용자가 늘더라도 서비스 품질이 떨어지지 않고 유지되는가가 곧 확정성

* 수평확장,수직확장

![수평확장,수직확장](/2023.03-%EA%B2%8C%EC%9E%84_%EC%84%9C%EB%B2%84_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D_%EA%B5%90%EA%B3%BC%EC%84%9C/04.%EA%B2%8C%EC%9E%84%EC%84%9C%EB%B2%84%EC%99%80%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8/picture1.png)

### 4.6.3. 성능

* 성능은 확장성과 비슷할수 있지만, 기본적으로 `얼마나 빨리 처리하는가`를 의미

* 서버에서 성능 개선

    1) 코드 최적화, 알고리즘 최적화

    2) 성능좋은 언어 사용, 하드웨어 사용

    3) 과부하 영역 분산

### 4.6.4. 관리편의성

## [4.7.플레이어 정보의 저장](https://thebook.io/006884/0265/)

## [4.8.서버구동 환경](https://thebook.io/006884/0270/)

## [4.9.서버구동 환경](https://thebook.io/006884/0278/)

## [4.10.더 읽을거리](https://www.inven.co.kr/webzine/news/?news=42073)